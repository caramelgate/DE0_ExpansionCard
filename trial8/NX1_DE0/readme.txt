注意

NISE X1 ライセンス

くわしくはsnapshotフォルダの圧縮ファイルを展開して対応ファイルをご覧ください。

---- 抜粋 ----------------------------------------------------------------------

２．ライセンス

　本ソフトウェアには、下記の著作物が含まれています。
・Katsumi Degawaさんの　CRTC6845(HD46505) CORE
  http://office-dsan.hp.infoseek.co.jp/rockola/fpga_rockola.htm
・Y.Kuwaharaさんの　fz80
  http://www.geocities.jp/kwhr0/hard/fz80.html
・Guy Hutchison (ghutchis@opencores.org)さんの　TV80
  http://www.opencores.org
　これらは個別のライセンスをがありますので、そちらに従って下さい。

　その他のファイルについては、下記の扱いとします。
・本ソフトウェア及びシステムは現状提供であり、一切の保証がありません。
・使用版権等、利用結果等に関する一切の保証は使用者が追う必要があります。
・営利目的に使うことを禁止します。
・本バージョンは、開発評価バージョンにつき、ソース及びオブジェクトの全部または
　一部を切り取って再配布、再利用することを暫定的に禁止します。

　上記の全ての事項を守れる場合に限り、ご利用いただけます。

--------------------------------------------------------------------------------

NX1 ライセンス

基本的にNISE X1のライセンスを継承し、AS-IS (そこにあるものがすべて)とします。

開発途中を公開リポジトリに置くのは、まあ、バージョン管理はしておきたいので勘弁願います。

開発途中版では検証用に以下の著作物を使用させていただいております。

ぷにゅ氏作成 x1ipl101 X1互換IPL
筑紫高宏氏作成 SWCX1 X1用S-OS SWORD


NX1とは

NX1は、X1CENTERの佐藤氏が公開している開発版のNISE X1を元にして、スーパーインポーズ機能を追加したものです。
スーパーインポーズなどビデオ機能の拡充を優先するため、元となったNISE X1よりも実機の再現性は低下しています。
再現度の高さを求めるなら、NISE X1の検討をおすすめします。

なおシミュレーションおよび製造検証が行いやすいよう、クロック系統の削減や非同期ラッチの同期化などは適宜修正しています。
またFPGAと異なり、実機やASICなどは電源投入時にラッチの内容が不定なので、リセット信号で初期化を行うように直しています。
ちなみにFPGAでよくあるリセットしなくても初期値が付いているラッチはASICでは実現できません。かならずリセット信号で明示的に初期値を読み込ませましょう。

対応するFPGA基板はDE0です。
デバイス依存はdef_DEVICEを参照するようにしているので、上位からオーバーライドすれば対象モジュールの書き換えは不要です。


X1に関する仮説

話半分かそれ以下で。仮説だし。

１）X1はビデオ編集機として売れた

SHARP X1はシャープがつくったパソコンです。
ここで重要なのは、MZを作っていた事業部ではなく、テレビ事業部がX1をつくったということでしょう。
つまりビデオ編集機として企画されたパソコンだとすると、変な機能とか毛色の変わった周辺機器とかつじつまがあうという話です。
さらにいえば、X1が簡単に倒れなかったのはビデオの字幕編集機として売れたからだというのが真相ではなかろうか？と思うわけです。
引導を渡したのもビデオ編集な気がします。ビデオトースターには勝てないよ。

X1が現役だった当時、大抵のX1ユーザーはOh!MZとかOh!Xあたりを読んでたようですが、毛色の変わったユーザーはビデオサロンとかも読んでました。
なぜビデオサロンかというと、そこで御手洗氏(当時フジテレビ)がビデオ編集のエフェクターとしてX1を使った記事を連載していたわけです。

X1が発売された当時はビデオカメラとかビデオデッキが結構普及して、写真屋やレンタルビデオ店ではビデオ撮影とか編集業務を始めるところもありました。
まあ今だから言える話ですが、映画館直取りビデオとか輸入の洋物ビデオに字幕を付けてレンタル店に流すとかいう編集仕事とかもバイトであったようです。
そういうときに必要なのがビデオタイトラーとかテロッパーなんですが、業務用は値段がすごいわけです。
そこへ格安ビデオタイトラーが出たとなれば、売れないわけがない、ですね。
素がパソコンなので日本語字幕は簡単に作れるし、PCGとGRAMを使えば気の利いたアニメーションもできるので重宝したようです。

今時ならGpProとかBlackMagicDesignが殴り込んできたような感じ？ですかね。
たぶん一昔前の世代なら、AMIGAとビデオトースターみたいなもの？かな。ああ、ビデオトースターといえばうごるー(フジテレビ)だ。

まあともかくX1でビデオ編集のフルセットは業務用に比べれば格安だったので、買ってもそれなり仕事をこなせば元は取れたようです。

そんなこんなで、仕事で使える機械が出てきて買える値段だからフルセットで売れた、というあたりでなないでしょうか。
あの高価なデジタルテロッパーも、当時の業界価格からすれば暴挙とも言える安値でしたし。
このあたりはPC-8801(初代8インチFDD付き)がものすごい値段だったけども、業務で会計処理をする立場からは破格値だったのと一緒です。

X1CENTERの佐藤氏はTURBOZの2D/2DDモードの動作が不合理だと嘆いていますが、業務用で使うには昔の2Dがそのまま最新機種でも問題なく読み書きできることが重要だったので、あれはあれで正しい互換だと思います。
とくにBIOSなどを介さずに直接FDDを操作するアプリケーションが動作しないようでは、クレームどころか損害賠償になってしまうし。


２）黒いX1

黒いX1。オフィシャルで実在した怪物です。
初代CZ800の筐体を黒く塗って倍速Z80を搭載したソフトウエアビルド用のモンスター。
IPL/BIOS ROMは32Kバイト搭載で、8インチFDDやSASI HDDが標準で使えたとか。
ソフトハウスとか業務用の直販品なので、一般には出回りませんでした。
それでもシャープのイベントには何度か置いてあったので結構有名です。
デチューンしてZ80 DMAを積んだのがTURBOじゃないかと思います。
黒いX1が一般売りと聞いて期待したけど、実物はTURBOだったので落胆したのは懐かしい思い出です。
倍速の専用機が存在したというあたり、やはりX1は何かおかしいということでしょうか。
いや、黒いのが本当のX1で高すぎたから初代機になったか。


３）8インチFDD

Z80(4MHZ)で8インチFDDを使うのは、一般的にステータスのビットチェックからデータレジスタの読み書きまでが間に合わないため、DMACが必須とされています。
とはいえ、後期型PC88(MRとか)でつかわれたFDCのDREQをNMIに接続しHALT命令で待たせてポーリング転送でもできないわけではありません。
制御回路を追加してもよい(コストアップ可)なら、DREQをウエイト信号に細工するというのもアリでしょう。
最初のデータをポーリングで待って、あとはデータレジスタをウエイト制御して読み書きすれば良さそうな気がします。

X1で8インチFDDと5インチFDDのインターフェースが別なのは、黒いX1が答えだと思います。
DMACがなくても倍速ならポーリングでも8インチFDDが問題なく動くんじゃないかな。
それに業務用ではドライブをたくさん接続するのが一般的でしたから、同時接続可能なドライブ数を増やすのに別のインターフェースにするのは当然でしょう。
また仮にウエイト制御とか搭載されていたとしても、5インチFDDでは余分なので省略したとかいうこともありそうな話です。


４）ぷにゅ氏

実在した人。故人。知人の友人だった。数回あったことがあるようなないような。
あんなことやこんなことなど、いろいろと伝説のある人だったようです。
同名がたくさんあるので、現在(2014/jan/20)知人に問い合わせ中。
アカウント消失とかいうよくない情報もあるけど、「X1エミュレーターのぷにゅ」氏とは別人であってほしいような。


続く。


状況 2014/JAN/10

IPLが起動します。
対応基板はTERASIC DE0(Cyclone3)です。

状況 2014/JAN/13

FDC MB8877がシミュレーションレベルでうごくようです。

状況 2014/JAN/17

シミュレーション用にいろいろと修正。
ぷにゅ氏作成のIPL x1ipl101に変更。
FDC MB8877を追加。起動テスト用のFDイメージに筑紫版X1用S-OS SWORDを使用。

状況 2014/JAN/20

FDCのシミュレーションを更新。


長嶋(T.NG) caramelgate@gmail.com

